(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{8379:(e,t,s)=>{Promise.resolve().then(s.bind(s,9046))},9046:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(5155),o=s(2115),n=s(719),r=s.n(n),l=s(6046);s(5853);var i=s(2112),c=s(8952),d=s(5219),p=s(4166),u=s(8356),m=s(4450),x=s(1996),h=s.n(x);h().string.isRequired,h().string.isRequired;var g=s(4055);function j(){let[e,t]=(0,o.useState)(null),[s,n]=(0,o.useState)([]),[r,l]=(0,o.useState)([]),[m,x]=(0,o.useState)({}),[h,j]=(0,o.useState)({}),[f,y]=(0,o.useState)(!0),[v,k]=(0,o.useState)([]),[w,N]=(0,o.useState)({project:"",taskType:"",status:""}),[S,C]=(0,o.useState)(""),[P,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{P&&console.log("\uD83D\uDD04 isModalOpen changed:",P)},[P]),(0,o.useEffect)(()=>{console.log("\uD83D\uDEE0️ Step 1: Fetching projects..."),fetch("http://127.0.0.1:5000/api/projects").then(e=>e.json()).then(e=>{console.log("✅ Step 2: Projects loaded:",e),k(e);let t=(Array.isArray(e)?e:[]).find(e=>"Miscellaneous"===e.name);t&&(console.log("✅ Step 3: Defaulting to 'Miscellaneous' project",t.id),C(t.id))}).catch(e=>console.error("\uD83D\uDEA8 Step 4: Error fetching projects:",e))},[]);let[T,D]=(0,o.useState)(e||{name:"",description:"",task_type:"User Story",priority:"Unset",status:"Not Started",project_id:""});(0,o.useEffect)(()=>{S&&D(e=>({...e,project_id:S}))},[S]);let A=(0,o.useCallback)(()=>{if(console.log("\uD83D\uDEE0️ Step 5: createNewTask triggered"),0===v.length){console.warn("⚠️ Step 6a: Projects list is empty, fetching projects..."),fetch("http://127.0.0.1:5000/api/projects").then(e=>e.json()).then(e=>{console.log("✅ Step 6b: Projects fetched:",e),k(e);let t=e.find(e=>"Miscellaneous"===e.name),s=t?t.id:null;if(!s){console.error("\uD83D\uDEA8 Step 7a: 'Miscellaneous' project not found!");return}console.log("✅ Step 7b: Defaulting to 'Miscellaneous'"),C(s),D({name:"",description:"",task_type:"User Story",priority:"Unset",status:"Not Started",project_id:s}),E(!0)}).catch(e=>console.error("\uD83D\uDEA8 Step 7c: Error fetching projects:",e));return}console.log("✅ Step 8: Using preloaded projects");let e=v.find(e=>"Miscellaneous"===e.name),s=e?e.id:null;if(!s){console.error("\uD83D\uDEA8 Step 9: 'Miscellaneous' project not found!");return}console.log("✅ Step 10: Opening task modal with default project"),D({name:"",description:"",task_type:"User Story",priority:"Unset",status:"Not Started",project_id:s}),C(s),t(null),E(!0)},[v]),I=(0,o.useCallback)(async(a,o,r)=>{console.log("\uD83D\uDCCC Step 21: handleFieldChange called with taskId: ".concat(a,", field: '").concat(o,"', value: '").concat(r,"'"));let l=s.find(e=>e.id===a);if(console.log("\uD83D\uDD0D Step 22: Checking if task exists in local state:",l),!l||l[o]===r){console.warn("⚠️ Step 23: No changes detected for ".concat(o,", skipping API call."));return}try{var i,c;console.log("\uD83D\uDCE1 Step 24: Sending update to API for",o);let s=await fetch("http://127.0.0.1:5000/api/tasks/".concat(a),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({[o]:r})}),l=await s.json();if(console.log("\uD83D\uDCE9 Step 25: API Response Received:",l),!s.ok)throw console.error("\uD83D\uDEA8 Step 26: API Error:",l),Error("Failed to update ".concat(o,": ").concat(l.error||"Unknown error"));console.log("✅ Step 27: Successfully updated '".concat(o,"' for Task ").concat(a," to '").concat(r,"'"));let d=null;if("project_id"===o){console.log("\uD83D\uDCCC Step 28: Checking project name for project_id:",r),console.log("\uD83D\uDCCC Current projects state:",v),Array.isArray(v)||console.error("\uD83D\uDEA8 projects is not an array!",v);let e=v.find(e=>e.id===parseInt(r));d=e?e.name:"Unknown Project"}let p=(null==l?void 0:null===(i=l.task)||void 0===i?void 0:i.contributor_id)||r,u=(null==l?void 0:null===(c=l.task)||void 0===c?void 0:c.contributor_name)||"Unassigned";console.log("\uD83D\uDD04 Step 29: Updating local state with new values..."),n(e=>e.map(e=>e.id===a?{...e,[o]:r,..."project_id"===o&&{project:d},..."contributor_id"===o&&{contributor_id:p,contributor_name:u}}:e)),e&&e.id===a&&(console.log("\uD83D\uDD04 Step 30: Updating selectedTask state in modal..."),t(e=>({...e,[o]:r,..."project_id"===o&&{project:d},..."contributor_id"===o&&{contributor_id:p,contributor_name:u}})))}catch(e){console.error("\uD83D\uDEA8 Step 31: Error updating ".concat(o,":"),e)}},[v,e,s]),U=async s=>{if(window.confirm("Are you sure you want to delete this task?"))try{if(!(await fetch("http://127.0.0.1:5000/api/tasks/delete/".concat(s),{method:"DELETE"})).ok)throw Error("Failed to delete task");n(e=>e.filter(e=>e.id!==s)),(null==e?void 0:e.id)===s&&t(null),console.log("Deleted Task ID: ".concat(s))}catch(e){console.error("Error deleting task:",e)}};(0,o.useEffect)(()=>{fetch("http://127.0.0.1:5000/api/tasks").then(e=>e.json()).then(e=>{let t=Array.isArray(e)?e:e.tasks||[];n(t),l(t);let s={};t.forEach(e=>{s[e.id]=e.status}),x(s)}).catch(e=>console.error("Error fetching tasks:",e))},[]);let[M,O]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async function(){O(!0);try{let e=await fetch("http://127.0.0.1:5000/api/projects");if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));k(await e.json())}catch(e){console.error("Error fetching projects:",e)}finally{O(!1)}})()},[]),(0,o.useEffect)(()=>{l(s.filter(e=>(!w.project||e.project===w.project)&&(!w.taskType||e.task_type===w.taskType)&&(!w.status||e.status===w.status)))},[w,s]);let L=async e=>{try{console.log("Opening modal for:",e);let s=await fetch("http://127.0.0.1:5000/api/tasks/".concat(e.id));if(!s.ok)throw Error("Failed to fetch task details");let a=await s.json();t(a),setTimeout(()=>{console.log("\uD83D\uDE80 Opening modal after fetching task data"),E(!0)},100)}catch(e){console.error("Error fetching task details:",e)}},R=e=>{j(t=>({...t,[e]:!t[e]}))},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.filter(e=>e.parent_id===t).map((t,o)=>(0,a.jsx)(g.sx,{draggableId:t.id.toString(),index:o,children:o=>(0,a.jsxs)("div",{ref:o.innerRef,...o.draggableProps,...o.dragHandleProps,className:"group",children:[(0,a.jsxs)("div",{className:"task-row grid grid-cols-[minmax(40px,60px)_minmax(40px,60px)_minmax(40px,60px)_minmax(250px,1fr)_minmax(50px,80px)_minmax(150px,200px)_minmax(130px,180px)_minmax(60px,100px)_minmax(100px,140px)_minmax(100px,140px)_minmax(130px,180px)_minmax(50px,80px)] gap-4 p-3 border-b border-gray-700 items-center hover:bg-gray-700 transition duration-200",style:{paddingLeft:"".concat(20*s,"px")},children:[(0,a.jsx)("span",{className:"text-center",children:(0,a.jsx)("input",{type:"checkbox"})}),(0,a.jsx)("span",{className:"text-center cursor-pointer",onClick:()=>R(t.id),children:e.some(e=>e.parent_id===t.id)?h[t.id]?(0,a.jsx)(i.A,{className:"w-5 h-5 text-white"}):(0,a.jsx)(c.A,{className:"w-5 h-5 text-white"}):(0,a.jsx)("span",{children:"\xa0"})}),(0,a.jsx)("span",{className:"task-type-icon flex justify-center",children:"Epic"===t.task_type?(0,a.jsx)(d.A,{className:"w-5 h-5 text-blue-400"}):"User Story"===t.task_type?(0,a.jsx)(p.A,{className:"w-5 h-5 text-purple-400"}):(0,a.jsx)(u.A,{className:"w-5 h-5 text-green-400"})}),(0,a.jsxs)("span",{className:"flex items-center relative w-full",children:[(0,a.jsx)("span",{className:"font-semibold",children:t.name}),(0,a.jsxs)("span",{className:"text-gray-400 text-sm ml-2",children:["(Parent-ID: ",t.parent_id||"None",")"]}),(0,a.jsx)("span",{className:"absolute right-4 opacity-0 group-hover:opacity-100 transition-opacity flex items-center space-x-1",children:(0,a.jsx)("span",{className:"cursor-pointer text-white-400 hover:underline flex items-center",onClick:()=>L(t),children:(0,a.jsx)("span",{className:"bi bi-arrows-angle-expand",children:" Open"})})})]}),(0,a.jsxs)("span",{className:"",children:["LM-",t.id]}),(0,a.jsx)("span",{className:"text-gray-400",children:t.project}),(0,a.jsx)("span",{className:"text-center",children:t.assigned_to||"Unassigned"}),(0,a.jsx)("span",{className:"text-center",children:t.story_points||"-"}),(0,a.jsx)("span",{className:"task-type-badge px-3 py-1 rounded text-center ".concat("Epic"===t.task_type?"bg-blue-500":"User Story"===t.task_type?"bg-purple-500":"bg-green-500"),children:t.task_type}),"Epic"===t.task_type?(0,a.jsxs)("select",{className:"priority-dropdown p-2 bg-gray-700 text-white rounded text-center",value:t.epic_priority||"",onChange:e=>I(t.id,"epic_priority",e.target.value),children:[(0,a.jsx)("option",{value:"P0",children:"P0 - Highest"}),(0,a.jsx)("option",{value:"P1",children:"P1 - High"}),(0,a.jsx)("option",{value:"P2",children:"P2 - Medium"}),(0,a.jsx)("option",{value:"P3",children:"P3 - Low"}),(0,a.jsx)("option",{value:"P4",children:"P4 - Lowest"})]}):(0,a.jsxs)("select",{className:"priority-dropdown p-2 bg-gray-700 text-white rounded text-center",value:t.priority||"",onChange:e=>I(t.id,"priority",e.target.value),children:[(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"}),(0,a.jsx)("option",{value:"Critical",children:"Critical"})]}),(0,a.jsxs)("select",{className:"task-status-dropdown p-2 bg-gray-700 text-white rounded text-center",value:t.status,onChange:e=>I(t.id,"status",e.target.value),children:[(0,a.jsx)("option",{value:"Not Started",children:"Not Started"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]}),(0,a.jsx)("button",{className:"text-red-400 hover:text-red-600 text-center",onClick:()=>U(t.id),children:(0,a.jsx)("i",{className:"bi bi-trash"})})]}),h[t.id]&&H(e,t.id,s+1)]})},t.id))};return(0,a.jsxs)("div",{className:"min-h-screen ".concat(f?"bg-gray-900 text-white":"bg-gray-100 text-black"," px-10 py-8 mt-16"),style:{backgroundImage:"url('/background.svg')",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",position:"relative",backgroundPosition:"center center"},children:[(0,a.jsxs)("nav",{className:"fixed top-0 left-0 w-full bg-gray-800 p-4 flex items-center justify-between shadow-md z-50",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"PMS Logo",className:"h-8 w-auto hidden sm:block",onError:e=>e.target.style.display="none"}),(0,a.jsx)("span",{className:"text-white text-xl font-bold sm:hidden",children:"PMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("a",{href:"http://127.0.0.1:5000/dashboard",className:"text-gray-300 hover:text-white",children:"Overview"}),(0,a.jsx)("a",{href:"http://127.0.0.1:5000/tasks/",className:"text-gray-300 hover:text-white",children:"All Tasks (Old)"}),(0,a.jsx)("a",{href:"http://localhost:3000/alltasks",className:"text-white font-bold",children:"All Tasks (React)"}),(0,a.jsx)("button",{className:"p-2 bg-gray-700 text-white hover:bg-gray-600 rounded",onClick:()=>y(!f),children:f?"☀️ Light Mode":"\uD83C\uDF19 Dark Mode"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("select",{className:"p-2 bg-gray-800 text-white border border-gray-600 rounded",onChange:e=>N({...w,project:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"All Projects"}),Array.isArray(v)?v.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id)):(0,a.jsx)("option",{disabled:!0,children:"Loading..."})]}),(0,a.jsxs)("select",{className:"p-2 bg-gray-800 text-white border border-gray-600 rounded",onChange:e=>N({...w,taskType:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"All Task Types"}),(0,a.jsx)("option",{value:"Epic",children:"Epic"}),(0,a.jsx)("option",{value:"User Story",children:"User Story"}),(0,a.jsx)("option",{value:"Subtask",children:"Subtask"})]}),(0,a.jsxs)("select",{className:"p-2 bg-gray-800 text-white border border-gray-600 rounded",onChange:e=>N({...w,status:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),(0,a.jsx)("option",{value:"Not Started",children:"Not Started"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]}),(0,a.jsx)("button",{className:"p-2 bg-red-500 hover:bg-red-700 rounded",onClick:()=>N({project:"",taskType:"",status:""}),children:"Clear Filters"})]}),(0,a.jsx)("button",{className:"new-task-button top-20 left-8 z-50 p-3 bg-blue-500 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg transition duration-200",onClick:A,children:"➕ New Task"}),(0,a.jsxs)("div",{className:" p-6 rounded-md shadow-md ".concat(f?"bg-gray-800":"bg-gray-300"),style:{backgroundColor:"rgba(21, 22, 34, 0.8)"},children:[(0,a.jsxs)("div",{className:"grid grid-cols-[minmax(40px,60px)_minmax(40px,60px)_minmax(40px,60px)_minmax(250px,1fr)_minmax(50px,80px)_minmax(150px,200px)_minmax(130px,180px)_minmax(60px,100px)_minmax(100px,140px)_minmax(80px,140px)_minmax(90px,180px)_minmax(30px,80px)] gap-4 p-2 font-bold bg-gray-700 rounded-md text-white",children:[(0,a.jsx)("span",{className:"text-center",children:(0,a.jsx)("input",{type:"checkbox",id:"selectAll"})}),(0,a.jsx)("span",{className:"",children:"Toggle"}),(0,a.jsx)("span",{className:"",children:"Icon"}),(0,a.jsx)("span",{className:"text-left",children:"Task Title"}),(0,a.jsx)("span",{className:"",children:"ID"}),(0,a.jsx)("span",{className:"",children:"Project"}),(0,a.jsx)("span",{className:"text-center",children:"Assigned To"}),(0,a.jsx)("span",{className:"text-center",children:"Estimate"}),(0,a.jsx)("span",{className:"",children:"Type"}),(0,a.jsx)("span",{className:"",children:"Priority"}),(0,a.jsx)("span",{className:"",children:"Status"}),(0,a.jsx)("span",{className:"text-center",children:"Delete"})]}),(0,a.jsx)(g.JY,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(r),[s]=t.splice(e.source.index,1);t.splice(e.destination.index,0,s),l(t)},children:(0,a.jsx)(g.gL,{droppableId:"tasklist",children:e=>(0,a.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[H(r),e.placeholder]})})})]}),P&&(0,a.jsx)(b,{isOpen:P,selectedTask:e,setSelectedTask:t,projects:v,selectedProjectId:S,onClose:()=>{console.log("❌ Modal Close Button Clicked! isModalOpen → false"),E(!1)},handleFieldChange:I})]})}function b(e){var t,s,n,i,c,d;let{isOpen:p,selectedTask:u,projects:x,selectedProjectId:h,onClose:g,handleFieldChange:j}=e,[b,f]=(0,o.useState)(u||{});(0,l.useRouter)(),(0,l.usePathname)();let[y,v]=(0,o.useState)([]),[k,w]=(0,o.useState)("modal"),N=(0,o.useRef)(null);(0,o.useEffect)(()=>{f(u||{})},[u]),(0,o.useEffect)(()=>{if(!u){let e=x.find(e=>"Miscellaneous"===e.name);f({name:"",description:"",task_type:"User Story",priority:"Unset",status:"Not Started",project_id:e?e.id:""})}},[u,x]);let S=(0,o.useRef)(_.debounce((e,t,s,a)=>{console.log("\uD83D\uDD25 Debounced Save Triggered at ".concat(new Date().toISOString()," for ").concat(t,":"),s),"function"==typeof a?a(e,t,s):console.error("\uD83D\uDEA8 handleFieldChange is not defined inside debounce!")},1e3)),[C,P]=(0,o.useState)(""),E=e=>{console.log("\uD83D\uDD0D Validating Task Name:",e),tasks.some(t=>t.name===e)?P("⚠️ A task with this name already exists."):P("")},T=r()(e=>{let{name:t,value:s}=e.target;console.log("\uD83D\uDEE0️ Debounced handleChange triggered for '".concat(t,"' → '").concat(s,"'")),f(e=>({...e,[t]:s})),(null==u?void 0:u.id)||"name"!==t||E(s)},500),D=async e=>{if(e.persist(),console.log("\uD83D\uDEE0️ Step 11: handleChange triggered for '".concat(e.target.name,"' → '").concat(e.target.value,"'")),T(e),f(t=>({...t,[e.target.name]:e.target.value})),console.log("\uD83D\uDD04 Step 11a: Updated taskData:",b),null==u?void 0:u.id){console.log("\uD83D\uDCCC Step 12: Editing existing task, triggering debounced save"),S.current(u.id,name,value,j);return}if(b.id){console.warn("⚠️ Step 13: Task ID ".concat(b.id," already exists, skipping duplicate creation."));return}try{console.log("\uD83D\uDEE0️ Step 14: Creating new task..."),console.log("\uD83D\uDCE1 Sending payload to API:");let e=await fetch("http://127.0.0.1:5000/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:b.name||"Untitled Task",description:b.description||"",task_type:b.task_type||"User Story",priority:b.priority||"Unset",status:b.status||"Not Started",project_id:b.project_id||h})}),t=await e.json();console.log("\uD83D\uDCE9 Step 15: API Response Received:",t),t.warning?(console.warn("⚠️ Step 16: Task name warning: ".concat(t.warning)),P(t.warning)):P(""),console.log("✅ Step 17: New Task Created Successfully - Task ID: ".concat(t.task.id,', Name: "').concat(t.task.name,'"')),f(e=>({...e,id:t.task.id})),console.log("\uD83D\uDD04 Step 18: Updated taskData with new ID:",b),"function"==typeof setSelectedTask?setSelectedTask(t.task):console.error("\uD83D\uDEA8 Step 19b: setSelectedTask is not available.")}catch(e){console.error("\uD83D\uDEA8 Step 20: Error creating new task:",e)}};return((0,o.useEffect)(()=>()=>{console.log("\uD83D\uDED1 Cancelling debouncedSave, but NOT closing modal."),S.current.cancel()},[]),(0,o.useEffect)(()=>{if(!b.project_id){console.warn("⚠️ project_id is missing, skipping contributor fetch.");return}(async function(){try{console.log("\uD83D\uDD04 Fetching contributors for project_id: ".concat(b.project_id));let e=await fetch("http://127.0.0.1:5000/api/projects/".concat(b.project_id,"/contributors/manage"));if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));let t=await e.json();console.log("✅ Contributors loaded:",t),v(t)}catch(e){console.error("❌ Error fetching contributors:",e)}})()},[b.project_id]),(0,o.useEffect)(()=>{u&&f(u)},[u]),u||p)?(0,a.jsx)("div",{className:"modal-background",children:(0,a.jsx)("div",{ref:N,className:"fixed inset-0 flex items-center justify-center overflow-hidden ".concat("modal"===k?"flex items-center justify-center":""," ").concat("side"===k?"absolute top-0 left-0 w-[800px] h-full":""),children:(0,a.jsxs)("div",{className:"task-modal p-6 rounded-lg shadow-lg relative z-50 transition-all duration-300 ease-in-out ".concat("modal"===k?"w-[70vw] max-w-4xl h-aut":""," ").concat("side"===k?"h-full w-[400px] shadow-lg":""," ").concat("full"===k?"fixed inset-0 w-full h-full p-8 max-w-none max-h-none":""),children:[(0,a.jsxs)("div",{className:"absolute top-4 left-6 flex space-x-3",children:[(0,a.jsx)("button",{"data-tooltip-id":"global-tooltip","data-tooltip-content":"Open in Modal View",onClick:()=>w("modal"),className:"modal-view-btn p-1 rounded",children:(0,a.jsx)("i",{className:"bi bi-aspect-ratio"})}),(0,a.jsx)("button",{"data-tooltip-id":"global-tooltip","data-tooltip-content":"Open in Side View",onClick:()=>w("side"),className:"modal-view-btn p-1 rounded",children:(0,a.jsx)("i",{className:"bi bi-layout-sidebar-inset-reverse"})}),(0,a.jsx)("button",{"data-tooltip-id":"global-tooltip","data-tooltip-content":"Open in Page View",onClick:()=>w("full"),className:"modal-view-btn p-1 rounded",children:(0,a.jsx)("i",{className:"bi bi-arrows-angle-expand"})})]}),(0,a.jsx)("div",{className:"absolute top-4 right-6 flex space-x-3",children:(0,a.jsx)("button",{onClick:g,className:"text-gray-200 hover:text-white",children:(0,a.jsx)(m.A,{className:"w-6 h-6"})})}),(0,a.jsx)("div",{className:"flex justify-between items-center border-b pb-4 mt-10 drag-handle cursor-move",onMouseDown:e=>{N.current&&onMouseDown(e)},children:(0,a.jsx)("h2",{className:"text-xl font-bold",children:b.name})}),(0,a.jsxs)("form",{className:"mt-4 grid grid-cols-12 gap-4",children:[(0,a.jsxs)("div",{className:"col-span-9",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium text-gray-700",children:"Task Title"}),(0,a.jsx)("input",{type:"text",name:"name",className:"input-task-name text-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:null!==(s=b.name)&&void 0!==s?s:"",onChange:D}),C&&(0,a.jsxs)("p",{className:"mt-2 text-yellow-500",children:["⚠️ ",C]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{name:"description",className:"textfield mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:"10",value:b.description,onChange:D})]})]}),(0,a.jsxs)("div",{className:"col-span-3 space-y-4 pl-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium text-gray-700",children:"Project"}),(0,a.jsxs)("select",{name:"project_id",className:"select-project mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:b.project_id||"",onChange:e=>{let t=e.target.value;j(b.id,"project_id",t);let s=x.find(e=>e.id===parseInt(t,10));(null==s?void 0:s.name)==="Miscellaneous"&&console.log("⚠️ Task is assigned to 'Miscellaneous'. Consider selecting a project.")},children:[(0,a.jsx)("option",{value:"",children:"Select Project"})," ",x.length>0?x.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id)):(0,a.jsx)("option",{disabled:!0,children:"Loading..."})]}),(null===(t=x.find(e=>e.id===parseInt(b.project_id,10)))||void 0===t?void 0:t.name)==="Miscellaneous"&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-yellow-400",children:["⚠️ This task is assigned to ",(0,a.jsx)("strong",{children:"Miscellaneous"}),". Choose a project if needed."]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium",children:"Task Type"}),(0,a.jsxs)("select",{name:"task_type",className:"select-task-type mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300",value:null!==(n=b.task_type)&&void 0!==n?n:"User Story",onChange:e=>j(b.id,"task_type",e.target.value),children:[(0,a.jsx)("option",{value:"Epic",children:"Epic"}),(0,a.jsx)("option",{value:"User Story",children:"User Story"}),(0,a.jsx)("option",{value:"Subtask",children:"Subtask"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"select-priority label block text-sm font-medium",children:"Priority"}),"Epic"===b.task_type?(0,a.jsxs)("select",{name:"epic_priority",className:"select-priority mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300",value:null!==(i=b.epic_priority)&&void 0!==i?i:"Unset",onChange:e=>j(b.id,"epic_priority",e.target.value),children:[(0,a.jsx)("option",{value:"P0",children:"P0 - Highest"}),(0,a.jsx)("option",{value:"P1",children:"P1 - High"}),(0,a.jsx)("option",{value:"P2",children:"P2 - Medium"}),(0,a.jsx)("option",{value:"P3",children:"P3 - Low"}),(0,a.jsx)("option",{value:"P4",children:"P4 - Lowest"})]}):(0,a.jsxs)("select",{name:"priority",className:"select-priority mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300",value:null!==(c=b.priority)&&void 0!==c?c:"Unset",onChange:e=>j(b.id,"priority",e.target.value),children:[(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"}),(0,a.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium",children:"Task Status"}),(0,a.jsxs)("select",{name:"status",className:"select-status mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300 ".concat("Not Started"===b.status?"status-not-started":"In Progress"===b.status?"status-in-progress":"Blocked"===b.status?"status-blocked":"Completed"===b.status?"status-completed":""),value:null!==(d=b.status)&&void 0!==d?d:"Not Started",onChange:e=>j(b.id,"status",e.target.value),children:[(0,a.jsx)("option",{value:"Not Started",children:"Not Started"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Blocked",children:"Blocked"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium",children:"Estimate (Story Points)"}),(0,a.jsx)("input",{type:"number",name:"story_points",className:"input-story-points mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:b.story_points||"",onChange:e=>j(b.id,"story_points",e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"label block text-sm font-medium text-gray-100",children:"Assigned Contributor"}),(0,a.jsxs)("select",{name:"contributor_id",className:"select-contributor mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:b.contributor_id||"",onChange:e=>j(b.id,"contributor_id",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Unassigned"}),y.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," ",e.is_in_project?"✅ (In Project)":"➕ (Add to Project)"]},e.id))]})]})]})]}),(0,a.jsx)("div",{className:"mt-6 flex justify-end space-x-4",children:(0,a.jsx)("button",{onClick:g,className:"px-4 py-2 bg-gray-400 text-white rounded-md",children:"Cancel"})})]})})}):null}s(2751)},2751:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[830,309,693,441,517,358],()=>t(8379)),_N_E=e.O()}]);