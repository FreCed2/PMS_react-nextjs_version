(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{6760:(e,t,r)=>{Promise.resolve().then(r.bind(r,7298))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},5853:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var s=r(2115),n="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;function a(e,t){var r,a,o,l,i,c,u,d=void 0===t?{}:t,m=d.decayRate,p=void 0===m?.95:m,h=d.safeDisplacement,f=void 0===h?10:h,b=d.applyRubberBandEffect,g=void 0!==b&&b,x=d.activeMouseButton,v=void 0===x?"Left":x,w=d.isMounted,j=void 0===w||w,y=(0,s.useRef)({isMouseDown:!1,isDraggingX:!1,isDraggingY:!1,initialMouseX:0,initialMouseY:0,lastMouseX:0,lastMouseY:0,scrollSpeedX:0,scrollSpeedY:0,lastScrollX:0,lastScrollY:0}),N=!1,k=!1,M=0,S=0,E=1/60*1e3;n(function(){j&&(N="scroll"===window.getComputedStyle(e.current).overflowX,k="scroll"===window.getComputedStyle(e.current).overflowY,M=e.current.scrollWidth-e.current.clientWidth,S=e.current.scrollHeight-e.current.clientHeight,r=window.getComputedStyle(e.current).cursor,a=[],o=[],l=[],e.current.childNodes.forEach(function(e){a.push(window.getComputedStyle(e).cursor),o.push("none"===window.getComputedStyle(e).transform?"":window.getComputedStyle(e).transform),l.push("none"===window.getComputedStyle(e).transition?"":window.getComputedStyle(e).transition)}))},[j]);var C=function(){var t=y.current.scrollSpeedX*E,r=y.current.scrollSpeedY*E,s=e.current.scrollLeft+t,n=e.current.scrollTop+r;e.current.scrollLeft=s,e.current.scrollTop=n,y.current.lastScrollX=s,y.current.lastScrollY=n},X=function(t){var r=t.clientX-y.current.initialMouseX,s=t.clientY-y.current.initialMouseY,n=e.current,a=n.clientWidth,o=n.clientHeight,l=0,i=0;N&&k?(l=.3*a*Math.sign(r)*Math.log10(1+.5*Math.abs(r)/a),i=.3*o*Math.sign(s)*Math.log10(1+.5*Math.abs(s)/o)):N?l=.3*a*Math.sign(r)*Math.log10(1+.5*Math.abs(r)/a):k&&(i=.3*o*Math.sign(s)*Math.log10(1+.5*Math.abs(s)/o)),e.current.childNodes.forEach(function(e){e.style.transform="translate3d("+l+"px, "+i+"px, 0px)",e.style.transition="transform 0ms"})},Y=function(){e.current.childNodes.forEach(function(e,t){e.style.transform=o[t],e.style.transition=l[t]})},_=function(){c=setInterval(function(){var t=y.current.scrollSpeedX*p;y.current.scrollSpeedX=t;var r=e.current.scrollLeft<=0,s=e.current.scrollLeft>=M;C(),(.05>Math.abs(t)||y.current.isMouseDown||r||s)&&(y.current.scrollSpeedX=0,clearInterval(c))},E),u=setInterval(function(){var t=y.current.scrollSpeedY*p;y.current.scrollSpeedY=t;var r=e.current.scrollTop<=0,s=e.current.scrollTop>=S;C(),(.05>Math.abs(t)||y.current.isMouseDown||r||s)&&(y.current.scrollSpeedY=0,clearInterval(u))},E),y.current.isDraggingX=!1,y.current.isDraggingY=!1,g&&(e.current.childNodes.forEach(function(e){e.style.transform="translate3d(0px, 0px, 0px)",e.style.transition="transform 250ms"}),i=setTimeout(Y,250))},P=function(e){e.preventDefault(),e.stopImmediatePropagation()},T=function(t){var s=y.current.isDraggingX||y.current.isDraggingY,n=y.current.initialMouseX-t.clientX,o=y.current.initialMouseY-t.clientY,l=Math.abs(n)>f||Math.abs(o)>f,i=s&&l;i?e.current.childNodes.forEach(function(e){e.addEventListener("click",P)}):e.current.childNodes.forEach(function(e){e.removeEventListener("click",P)}),y.current.isMouseDown=!1,y.current.lastMouseX=0,y.current.lastMouseY=0,e.current.style.cursor=r,e.current.childNodes.forEach(function(e,t){e.style.cursor=a[t]}),i&&_()},L=function(t){if(y.current.isMouseDown){t.preventDefault();var r=y.current.lastMouseX-t.clientX;y.current.lastMouseX=t.clientX,y.current.scrollSpeedX=r/E,y.current.isDraggingX=!0;var s=y.current.lastMouseY-t.clientY;y.current.lastMouseY=t.clientY,y.current.scrollSpeedY=s/E,y.current.isDraggingY=!0,e.current.style.cursor="grabbing",e.current.childNodes.forEach(function(e){e.style.cursor="grabbing"});var n=e.current.scrollLeft<=0&&N,a=e.current.scrollLeft>=M&&N,o=e.current.scrollTop<=0&&k,l=e.current.scrollTop>=S&&k;(n||a||o||l)&&g&&X(t),C()}},D=function(){M=e.current.scrollWidth-e.current.clientWidth,S=e.current.scrollHeight-e.current.clientHeight};return(0,s.useEffect)(function(){return j&&(window.addEventListener("mouseup",T),window.addEventListener("mousemove",L),window.addEventListener("resize",D)),function(){window.removeEventListener("mouseup",T),window.removeEventListener("mousemove",L),window.removeEventListener("resize",D),clearInterval(c),clearInterval(u),clearTimeout(i)}},[j]),{events:{onMouseDown:function(e){var t;t=e.buttons,("Left"===v&&1===t||"Middle"===v&&4===t||"Right"===v&&2===t)&&(y.current.isMouseDown=!0,y.current.lastMouseX=e.clientX,y.current.lastMouseY=e.clientY,y.current.initialMouseX=e.clientX,y.current.initialMouseY=e.clientY)}}}}},7298:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5155),n=r(2115),a=r(6046),o=r(4450),l=r(5853);function i(){let e=(0,a.useParams)(),t=(0,a.useRouter)();(0,a.usePathname)();let r=e.taskId,[i,c]=(0,n.useState)(null),[u,d]=(0,n.useState)([]),[m,p]=(0,n.useState)([]),[h,f]=(0,n.useState)(!1),[b,g]=(0,n.useState)("modal"),x=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},v=(0,n.useRef)(null),w=null;(0,n.useEffect)(()=>{v.current&&v.current instanceof Element&&(w=(0,l.P)(v).onMouseDown,v.current.onmousedown=w)},[]),(0,n.useEffect)(()=>{(async function(){try{let e=await fetch("http://127.0.0.1:5000/api/tasks/".concat(r));if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));let t=await e.json();c(t),c({...t,status:t.status||"Not Started"});let s=await fetch("http://127.0.0.1:5000/api/projects");if(!s.ok)throw Error("HTTP error! Status: ".concat(s.status));d(await s.json())}catch(e){console.error("Error fetching task or projects:",e)}})()},[r]),(0,n.useEffect)(()=>{i&&i.project_id&&e();async function e(){try{let e=await fetch("http://127.0.0.1:5000/api/projects/".concat(i.project_id,"/contributors/manage"));if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));p(await e.json())}catch(e){console.error("Error fetching contributors:",e)}}},[i]);let j=async e=>{let t=e.target.value;c({...i,assigned_to:t});try{let e=await fetch("http://127.0.0.1:5000/api/projects/".concat(i.project_id,"/contributors/manage"));(await e.json()).some(e=>e.id===parseInt(t))||await fetch("http://127.0.0.1:5000/api/projects/".concat(i.project_id,"/contributors/manage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contributor_id:t})});let r=await fetch("http://127.0.0.1:5000/api/projects/".concat(i.project_id,"/contributors/manage")),s=await r.json();p(s)}catch(e){console.error("Error adding contributor to project:",e)}},y=async()=>{f(!0),(await fetch("http://127.0.0.1:5000/api/tasks/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok?alert("Task updated successfully!"):alert("Error updating task."),f(!1)},N=()=>{t.push("/alltasks",{scroll:!1})};return i?(0,s.jsx)("div",{className:"modal-background",children:(0,s.jsx)("div",{ref:v,className:"fixed inset-0 flex items-center justify-center overflow-hidden ".concat("modal"===b?"flex items-center justify-center":""," ").concat("side"===b?"absolute top-0 left-0 w-[800px] h-full":""),children:(0,s.jsxs)("div",{className:"task-modal p-6 rounded-lg shadow-lg relative z-50 transition-all duration-300 ease-in-out ".concat("modal"===b?"w-[70vw] max-w-4xl h-aut":""," ").concat("side"===b?"h-full w-[400px] shadow-lg":""," ").concat("full"===b?"fixed inset-0 w-full h-full p-8 max-w-none max-h-none":""),children:[(0,s.jsxs)("div",{className:"absolute top-4 left-6 flex space-x-3",children:[(0,s.jsx)("button",{"data-tooltip-id":"global-tooltip","data-tooltip-content":"Open in Modal View",onClick:()=>g("modal"),className:"modal-view-btn p-1 rounded",children:(0,s.jsx)("i",{className:"bi bi-aspect-ratio"})}),(0,s.jsx)("button",{"data-tooltip-id":"global-tooltip","data-tooltip-content":"Open in Side View",onClick:()=>g("side"),className:"modal-view-btn p-1 rounded",children:(0,s.jsx)("i",{className:"bi bi-layout-sidebar-inset-reverse"})}),(0,s.jsx)("button",{"data-tooltip-id":"global-tooltip","data-tooltip-content":"Open in Page View",onClick:()=>g("full"),className:"modal-view-btn p-1 rounded",children:(0,s.jsx)("i",{className:"bi bi-arrows-angle-expand"})})]}),(0,s.jsx)("div",{className:"absolute top-4 right-6 flex space-x-3",children:(0,s.jsx)("button",{onClick:N,className:"text-gray-200 hover:text-white",children:(0,s.jsx)(o.A,{className:"w-6 h-6"})})}),(0,s.jsx)("div",{className:"flex justify-between items-center border-b pb-4 mt-10 drag-handle cursor-move",onMouseDown:w,children:(0,s.jsx)("h2",{className:"text-xl font-bold",children:i.name})}),(0,s.jsxs)("form",{className:"mt-4 grid grid-cols-12 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-9",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium text-gray-700",children:"Task Title"}),(0,s.jsx)("input",{type:"text",name:"name",className:"text-field mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:i.name,onChange:x})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{name:"description",className:"textfield mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:"10",value:i.description,onChange:x})]})]}),(0,s.jsxs)("div",{className:"col-span-3 space-y-4 pl-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium text-gray-700",children:"Project"}),(0,s.jsx)("select",{name:"project_id",className:"select-project mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:i.project_id,onChange:x,children:u.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium",children:"Task Type"}),(0,s.jsxs)("select",{name:"task_type",className:"select-task-type mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300 ".concat("Epic"===i.task_type?"task-epic":"User Story"===i.task_type?"task-userstory":"Subtask"===i.task_type?"task-subtask":""),value:i.task_type,onChange:x,children:[(0,s.jsx)("option",{value:"Epic",children:"Epic"}),(0,s.jsx)("option",{value:"User Story",children:"User Story"}),(0,s.jsx)("option",{value:"Subtask",children:"Subtask"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"select-priority label block text-sm font-medium",children:"Priority"}),(0,s.jsxs)("select",{name:"priority",className:"select-priority mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300",value:i.priority,onChange:x,children:[(0,s.jsx)("option",{value:"Low",children:"Low"}),(0,s.jsx)("option",{value:"Medium",children:"Medium"}),(0,s.jsx)("option",{value:"High",children:"High"}),(0,s.jsx)("option",{value:"Critical",children:"Critical"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium",children:"Task Status"}),(0,s.jsxs)("select",{name:"status",className:"select-status mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 transition-all duration-300 ".concat("Not Started"===i.status?"status-not-started":"In Progress"===i.status?"status-in-progress":"Blocked"===i.status?"status-blocked":"Completed"===i.status?"status-completed":""),value:i.status,onChange:x,children:[(0,s.jsx)("option",{value:"Not Started",children:"Not Started"}),(0,s.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,s.jsx)("option",{value:"Blocked",children:"Blocked"}),(0,s.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium",children:"Estimate (Story Points)"}),(0,s.jsx)("input",{type:"number",name:"story_points",className:"input-story-points mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:i.story_points||"",onChange:x})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"label block text-sm font-medium text-gray-100",children:"Assigned Contributor"}),(0,s.jsxs)("select",{name:"assigned_to",className:"select-contributor mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:i.assigned_to||"",onChange:j,children:[(0,s.jsx)("option",{value:"",children:"Unassigned"}),m.map(e=>(0,s.jsxs)("option",{value:e.id,className:e.is_in_project?"in-project":"add",children:[e.name," ",e.is_in_project?"✅ (In Project)":"➕ (Add to Project)"]},e.id))]})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,s.jsx)("button",{onClick:N,className:"px-4 py-2 bg-gray-400 text-white rounded-md",children:"Cancel"}),(0,s.jsx)("button",{onClick:y,className:"px-4 py-2 bg-blue-500 text-white rounded-md",disabled:h,children:h?"Saving...":"Save Task"})]})]})})}):(0,s.jsx)("p",{children:"Loading..."})}r(2751)},2751:()=>{},4450:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(2115);let n=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[830,441,517,358],()=>t(6760)),_N_E=e.O()}]);