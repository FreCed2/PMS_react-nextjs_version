File: ./run.py

File: ./list_all_routes.py

File: ./list_routes.py

File: ./init_db.py

File: ./scripts for documentation/new_generate_documentation.py
  Functions:
    - validate_dependencies
    - ensure_output_folder
    - get_timestamp
    - log_file_action
    - summarize_outputs
    - generate_module_interaction
    - generate_sequence_diagrams
    - generate_database_schema
    - generate_all_documentation

File: ./scripts for documentation/generate_zip_of_txt_projectfiles.py
  Functions:
    - should_exclude

File: ./scripts for documentation/WIP_autogenerate_uml_sequence_diagrams.py
  Functions:
    - ensure_folder
      Docstring: Ensure the output folder exists.
    - get_timestamp
      Docstring: Generate a timestamp for filenames.
    - log_file_action
      Docstring: Log actions performed on files.
    - render_plantuml
      Docstring: Render the PlantUML diagram.
    - parse_logs
      Docstring: Parse structured logs to extract interactions.
Expected log format:
[TIMESTAMP] Caller=Frontend, Callee=Backend, Action=POST /tasks/archive/<task_id>, File=routes.py
    - parse_routes
      Docstring: Parse Flask route definitions to infer interactions.
Example route:
@bp.route("/tasks/archive/<int:task_id>", methods=["POST"])
def archive_task():
    - generate_puml
      Docstring: Generate a .puml file for the given interaction steps.
    - generate_sequence_diagrams
      Docstring: Generate sequence diagrams by analyzing logs and routes.

File: ./scripts for documentation/WIP_newnew_generate_documentation.py
  Functions:
    - validate_dependencies
    - ensure_output_folder
    - get_timestamp
    - log_file_action
    - summarize_outputs
    - generate_module_interaction
    - generate_sequence_diagrams
    - generate_database_schema
    - generate_all_documentation

File: ./scripts for documentation/WIP_generate_documentation.py
  Functions:
    - validate_dependencies
      Docstring: Ensure required tools (pyreverse, dot, plantuml) are installed and accessible in the PATH.
    - ensure_output_folder
      Docstring: Ensure the output folder exists; create it if it does not.
    - get_timestamp
      Docstring: Generate a timestamp for filenames.
    - log_file_action
      Docstring: Log actions performed on files (move, rename, generate, etc.).
    - summarize_outputs
      Docstring: Print a summary of all generated files saved in the output folder.
    - find_dot_files
      Docstring: Recursively search for .dot files and log their locations.
    - generate_module_interaction
      Docstring: Generate module interaction diagrams using Pyreverse and save the output in the specified folder.
    - generate_database_schema
      Docstring: Extract and save the database schema from the PostgreSQL database.
    - generate_sequence_diagrams
      Docstring: Generate UML sequence diagrams for specified interactions.
    - parse_logs_for_sequence
      Docstring: Parse logs and generate a sequence diagram from file interactions.
    - generate_all_documentation
      Docstring: Main function to generate all documentation artifacts for the project.

File: ./scripts for documentation/generate_project_structure.py
  Functions:
    - generate_project_structure

File: ./scripts for documentation/create_list_of_all_endp_func_classes_jsfunction_jsfiles.py
  Functions:
    - parse_python_file
      Docstring: Parse a Python file and extract endpoints, functions, classes, and their docstrings.
    - parse_javascript_file
      Docstring: Parse a JavaScript file and extract functions and comments.
    - scan_project
      Docstring: Scan the project directory for Python and JavaScript files, extract their structure and docstrings, skipping excluded folders and files.
    - save_results_to_file
      Docstring: Save the parsed results to a file.

File: ./scripts for documentation/Convert_JSON_to_DOT2.py
  Functions:
    - prompt_for_file
      Docstring: Prompt the user for a file name and return the full path.
    - generate_dot_file
      Docstring: Convert JSON data to a DOT file for visualization.
    - write_edges

File: ./scripts for documentation/Convert_JSON_to_DOT.py
  Functions:
    - json_to_dot
      Docstring: Convert a JSON representation of a directory structure into a DOT file.
    - add_nodes_and_edges
      Docstring: Recursively add nodes and edges to the DOT graph.

File: ./scripts for documentation/generate_folder_structure.py
  Functions:
    - generate_project_structure
      Docstring: Generate a textual representation of the project's folder structure as a tree, excluding files.

File: ./scripts for documentation/generate_folder_structure_incl_files.py
  Functions:
    - generate_project_structure
      Docstring: Generate a textual and JSON representation of the project's folder and file structure.
    - build_tree
    - write_text_tree

File: ./scripts for documentation/generate_list_all_endp_func_meth.py
  Functions:
    - parse_file
      Docstring: Parse a Python file and extract endpoints, functions, classes, and their docstrings.
    - scan_project
      Docstring: Scan the Python project directory for files, extract their structure and docstrings, skipping excluded folders and files.
    - save_results_to_file
      Docstring: Save the parsed results to a file.

File: ./scripts for documentation/create_database_schema/run_export_schema.py

File: ./scripts for documentation/create_database_schema/export_schema.py
  Endpoints:
    - constrained_columns (Methods: get)
    - nullable (Methods: get)
    - default (Methods: get)
    - unique (Methods: get)
  Functions:
    - export_database_schema
      Docstring: Export database schema in the specified format.

File: ./app/__init__.py
  Endpoints:
    - ENV (Methods: get)
    - ENV (Methods: get)
    - SQLALCHEMY_RECORD_QUERIES (Methods: get)
  Functions:
    - create_app
      Docstring: Application factory function to initialize the Flask app.

File: ./app/tasks/models.py
  Functions:
    - __init__
    - validate_task_changes
      Docstring: Validates changes to 'parent_id' and 'task_type'.
Ensures hierarchy validity and checks for circular references.
    - _validate_hierarchy_change
      Docstring: Validates hierarchy changes based on task_type and parent_id.
This method avoids setting attributes and focuses only on validation.
    - check_circular_reference
      Docstring: Iteratively checks for circular references in the task hierarchy.
Prevents stack overflow on deep hierarchies.
    - _validate_no_circular_references
      Docstring: Validates that there are no circular references in the task hierarchy.

Args:
    new_parent_id (int): The new parent ID to validate.

Raises:
    ValueError: If a circular reference is detected.
    - to_dict
    - validate_hierarchy
    - save
      Docstring: Saves the task to the database after validation.

Raises:
    ValueError: If validation fails.
    - delete_with_children
      Docstring: Deletes the task and optionally its children if 'confirm' is True.
    - archive
      Docstring: Archives the task and its subtasks.
    - unarchive
      Docstring: Unarchives the task and its subtasks.
    - mark_completed
      Docstring: Marks the task as completed.
    - to_dict_with_children
      Docstring: Converts the Task instance into a dictionary, including its children.
Ensures that the hierarchy is serialized properly.
    - __repr__
  Classes:
    - Task
      - __init__
      - validate_task_changes
        Docstring: Validates changes to 'parent_id' and 'task_type'.
Ensures hierarchy validity and checks for circular references.
      - _validate_hierarchy_change
        Docstring: Validates hierarchy changes based on task_type and parent_id.
This method avoids setting attributes and focuses only on validation.
      - check_circular_reference
        Docstring: Iteratively checks for circular references in the task hierarchy.
Prevents stack overflow on deep hierarchies.
      - _validate_no_circular_references
        Docstring: Validates that there are no circular references in the task hierarchy.

Args:
    new_parent_id (int): The new parent ID to validate.

Raises:
    ValueError: If a circular reference is detected.
      - to_dict
      - validate_hierarchy
      - save
        Docstring: Saves the task to the database after validation.

Raises:
    ValueError: If validation fails.
      - delete_with_children
        Docstring: Deletes the task and optionally its children if 'confirm' is True.
      - archive
        Docstring: Archives the task and its subtasks.
      - unarchive
        Docstring: Unarchives the task and its subtasks.
      - mark_completed
        Docstring: Marks the task as completed.
      - to_dict_with_children
        Docstring: Converts the Task instance into a dictionary, including its children.
Ensures that the hierarchy is serialized properly.
      - __repr__

File: ./app/tasks/__init__.py

File: ./app/tasks/utils.py
  Endpoints:
    - parent_id (Methods: get)
  Functions:
    - filter_tasks
      Docstring: Dynamically filters tasks based on criteria provided in a dictionary, 
with optimized loading for related models.

Args:
    filters (dict): A dictionary of filtering criteria.
    page (int, optional): The page number for pagination.
    per_page (int, optional): The number of items per page.

Returns:
    Query or Pagination: A SQLAlchemy query object or paginated results.
    - debug_parent_child_relationships
      Docstring: Generates a debug map of parent-child relationships for all tasks.

Args:
    project_id (int, optional): Restrict to tasks from a specific project.

Returns:
    dict: A dictionary mapping parent IDs to their child task IDs.
    - validate_parent_child_relationships
      Docstring: Validates all parent-child relationships in the database to ensure they conform to hierarchy rules.

Raises:
    ValueError: If invalid relationships are detected.
    - get_all_task_ids_with_parents
      Docstring: Returns a flat list of tasks with their parent IDs for debugging.

Returns:
    list: A list of tuples (task_id, parent_id).
    - calculate_total_story_points
      Docstring: Calculates the total story points for a project.
    - calculate_completed_story_points
      Docstring: Calculates the total completed story points for a project.
    - calculate_completion_percentage
      Docstring: Calculates the completion percentage of a project.
    - delete_project_and_tasks
      Docstring: Deletes a project and all its associated tasks.
    - contributor_has_assigned_tasks
      Docstring: Checks if a contributor has tasks assigned in a project.
    - fetch_task_with_logging
      Docstring: Fetch a task with detailed logging, including parent task information.
    - archive_task
      Docstring: Archive a task and all its subtasks, preventing infinite recursion.

Args:
    task (Task): The task to be archived.
    visited (set): A set of task IDs already processed (for recursion guard).
    - validate_hierarchy
      Docstring: Validates the hierarchy of a task or returns valid parent types.

Args:
    task (Task): The task instance to validate (optional).
    parent_id (int): The ID of the parent task to validate against (optional).
    task_type (str): The type of the task to determine valid parents (optional).

Returns:
    list: If no task and parent_id are provided, returns valid parent types for the task's type.

Raises:
    ValueError: If the hierarchy rules are violated during validation.
    - fetch_all_tasks
      Docstring: Fetches all tasks for a specific project, including project, contributor, and child task relationships.

Args:
    project_id (int): The ID of the project whose tasks need to be fetched.

Returns:
    list: A list of Task objects with their relationships loaded.
    - fetch_all_tasks_as_dicts
      Docstring: Fetches a list of tasks based on optional filters and serializes them into dictionaries.

Args:
    filters (dict, optional): A dictionary of filters to apply to the task query.

Returns:
    list[dict]: A list of serialized task dictionaries.
    - fetch_task_as_dict
      Docstring: Fetches a task by ID and returns it as a dictionary.

Args:
    task_id (int): The ID of the task to fetch.

Returns:
    dict: A dictionary representation of the task.

Raises:
    ValueError: If the task is not found.
    - to_dict
      Docstring: Converts the Task object into a dictionary for JSON responses.

Returns:
    dict: A dictionary representation of the Task object.
    - generate_page_numbers
      Docstring: Generates a list of page numbers for pagination, including ellipses.

Args:
    current_page (int): The current page number.
    total_pages (int): Total number of pages.
    left_edge (int): Number of pages to show at the left edge.
    right_edge (int): Number of pages to show at the right edge.
    left_current (int): Number of pages to show to the left of the current page.
    right_current (int): Number of pages to show to the right of the current page.

Returns:
    list: A list of page numbers or None for ellipses.
  Classes:
    - TaskService
      - filter_tasks
        Docstring: Dynamically filters tasks based on criteria provided in a dictionary, 
with optimized loading for related models.

Args:
    filters (dict): A dictionary of filtering criteria.
    page (int, optional): The page number for pagination.
    per_page (int, optional): The number of items per page.

Returns:
    Query or Pagination: A SQLAlchemy query object or paginated results.
      - debug_parent_child_relationships
        Docstring: Generates a debug map of parent-child relationships for all tasks.

Args:
    project_id (int, optional): Restrict to tasks from a specific project.

Returns:
    dict: A dictionary mapping parent IDs to their child task IDs.
      - validate_parent_child_relationships
        Docstring: Validates all parent-child relationships in the database to ensure they conform to hierarchy rules.

Raises:
    ValueError: If invalid relationships are detected.
      - get_all_task_ids_with_parents
        Docstring: Returns a flat list of tasks with their parent IDs for debugging.

Returns:
    list: A list of tuples (task_id, parent_id).
      - calculate_total_story_points
        Docstring: Calculates the total story points for a project.
      - calculate_completed_story_points
        Docstring: Calculates the total completed story points for a project.
      - calculate_completion_percentage
        Docstring: Calculates the completion percentage of a project.
      - delete_project_and_tasks
        Docstring: Deletes a project and all its associated tasks.
      - contributor_has_assigned_tasks
        Docstring: Checks if a contributor has tasks assigned in a project.
      - fetch_task_with_logging
        Docstring: Fetch a task with detailed logging, including parent task information.
      - archive_task
        Docstring: Archive a task and all its subtasks, preventing infinite recursion.

Args:
    task (Task): The task to be archived.
    visited (set): A set of task IDs already processed (for recursion guard).
      - validate_hierarchy
        Docstring: Validates the hierarchy of a task or returns valid parent types.

Args:
    task (Task): The task instance to validate (optional).
    parent_id (int): The ID of the parent task to validate against (optional).
    task_type (str): The type of the task to determine valid parents (optional).

Returns:
    list: If no task and parent_id are provided, returns valid parent types for the task's type.

Raises:
    ValueError: If the hierarchy rules are violated during validation.
      - fetch_all_tasks
        Docstring: Fetches all tasks for a specific project, including project, contributor, and child task relationships.

Args:
    project_id (int): The ID of the project whose tasks need to be fetched.

Returns:
    list: A list of Task objects with their relationships loaded.
      - fetch_all_tasks_as_dicts
        Docstring: Fetches a list of tasks based on optional filters and serializes them into dictionaries.

Args:
    filters (dict, optional): A dictionary of filters to apply to the task query.

Returns:
    list[dict]: A list of serialized task dictionaries.
      - fetch_task_as_dict
        Docstring: Fetches a task by ID and returns it as a dictionary.

Args:
    task_id (int): The ID of the task to fetch.

Returns:
    dict: A dictionary representation of the task.

Raises:
    ValueError: If the task is not found.
      - to_dict
        Docstring: Converts the Task object into a dictionary for JSON responses.

Returns:
    dict: A dictionary representation of the Task object.
      - generate_page_numbers
        Docstring: Generates a list of page numbers for pagination, including ellipses.

Args:
    current_page (int): The current page number.
    total_pages (int): Total number of pages.
    left_edge (int): Number of pages to show at the left edge.
    right_edge (int): Number of pages to show at the right edge.
    left_current (int): Number of pages to show to the left of the current page.
    right_current (int): Number of pages to show to the right of the current page.

Returns:
    list: A list of page numbers or None for ellipses.

File: ./app/tasks/routes.py
  Endpoints:
    - / (Methods: route)
    - /details/<int:task_id> (Methods: route)
    - /api/projects/<int:project_id>/contributors (Methods: route)
    - /<int:task_id>/assign_contributor (Methods: route)
    - /archive/<int:task_id> (Methods: route)
    - /unarchive/<int:task_id> (Methods: route)
    - /disconnect/<int:task_id> (Methods: route)
    - /available_tasks (Methods: route)
    - /assign_parent/<int:task_id> (Methods: route)
    - /subtasks<int:task_id> (Methods: route)
    - /assign_subtasks/<int:task_id> (Methods: route)
    - /reorder_subtasks (Methods: route)
    - /debug/csrf-token (Methods: route)
    - /batch_update/ (Methods: route)
    - /hierarchy/<int:project_id> (Methods: route)
    - /search/ (Methods: route)
    - project_id (Methods: get)
    - contributor_id (Methods: get)
    - task_type (Methods: get)
    - completion_status (Methods: get)
    - page (Methods: get)
    - per_page (Methods: get)
    - task_ids (Methods: get)
    - action (Methods: get)
    - q (Methods: get)
    - contributor_id (Methods: get)
    - exclude_task_id (Methods: get)
    - task_type (Methods: get)
    - search (Methods: get)
    - project_id (Methods: get)
    - limit (Methods: get)
    - page (Methods: get)
    - parent_id (Methods: get)
    - parent_id (Methods: get)
    - ordered_tasks (Methods: get)
    - show_archived (Methods: get)
    - hierarchical (Methods: get)
  Functions:
    - list_tasks
      Docstring: List tasks globally with filtering, optional hierarchical ordering, and pagination.
    - task_details
      Docstring: Fetch and display details for a specific task.
    - get_project_contributors
      Docstring: Fetch contributors for a specific project.
    - assign_contributor
      Docstring: Assign a contributor to a task.
    - archive_task
      Docstring: Archive a task and its subtasks.
    - unarchive_task
      Docstring: Unarchive a task and its subtasks.
    - disconnect_subtask
      Docstring: Remove parent reference from a subtask.
    - available_tasks
      Docstring: Fetch a list of available tasks, excluding the specified one,
while enforcing valid parent-child hierarchy rules.
    - assign_parent_task
      Docstring: Assign a parent task to an existing task.
    - get_subtasks
      Docstring: Fetch subtasks for a given task.
    - assign_subtasks
      Docstring: Assign multiple subtasks to a parent task.
    - reorder_subtasks
      Docstring: Reorder subtasks globally or reassign them to a different parent.

Steps:
- Parse and validate input from the frontend.
- Update parent-child relationships and sort order in the database.
- Commit changes and return a success response.
- Handle errors gracefully and provide detailed logs for debugging.
    - debug_csrf_token
    - batch_update_tasks
      Docstring: Perform batch updates on tasks.
    - task_hierarchy
      Docstring: Fetch the task hierarchy for a specific project.
    - search_tasks
      Docstring: Search tasks by name.
    - build_hierarchy

File: ./app/forms/__init__.py

File: ./app/forms/forms.py
  Functions:
    - get_task_model
    - validate
      Docstring: Override the default validate method to include logging.
    - validate_parent_id
    - validate_new_parent_id
    - validate_parent_id
  Classes:
    - ProjectForm
    - AddContributorForm
      - validate
        Docstring: Override the default validate method to include logging.
    - ProgressEditForm
    - AddProgressForm
    - DeleteProjectForm
    - TaskForm
      - validate_parent_id
    - ArchiveTaskForm
    - FilterTasksForm
    - ReassignSubtaskForm
      - validate_new_parent_id
    - AssignSubtaskForm
      - validate_parent_id

File: ./app/charts/contributor_breakdown_chart.py
  Functions:
    - generate_contributor_breakdown_chart
    - format_autopct

File: ./app/charts/__init__.py

File: ./app/charts/burnup_chart.py
  Functions:
    - generate_burnup_chart

File: ./app/charts/project_breakdown_chart.py
  Functions:
    - generate_project_breakdown_chart
    - format_autopct

File: ./app/utils/logging_config.py
  Functions:
    - setup_logging
      Docstring: Configure logging for the application, including rotating file logs and
development/production environment adjustments.

File: ./app/utils/__init__.py

File: ./app/utils/common_utils.py
  Functions:
    - log_interaction
      Docstring: Logs interaction details for debugging and sequence generation.
        :param caller: The calling entity or module.
        :param callee: The receiving entity or module.
        :param action: The action being logged.
        :param data: Optional data payload.
        :param result: Optional result of the action.
        :param error: Optional error message.
    - count_ongoing_projects
      Docstring: Count ongoing projects based on their story points completion.
    - count_completed_projects
      Docstring: Count completed projects where all story points are finished.
    - count_unstarted_projects
      Docstring: Count unstarted projects where no story points are completed.
    - count_all_projects
      Docstring: Count all projects in the database.
    - count_all_contributors
      Docstring: Count all contributors in the database.
    - count_assigned_contributors
      Docstring: Count contributors assigned to at least one project.
    - count_unassigned_contributors
      Docstring: Count contributors not assigned to any project.

File: ./app/models/models.py
  Functions:
    - contributors
      Docstring: Define the many-to-many relationship for contributors dynamically.
    - add_contributor
      Docstring: Add a contributor to the project.
    - remove_contributor
      Docstring: Remove a contributor from the project.
    - update_story_points
      Docstring: Recalculate the completed story points for the project.
    - total_story_points
      Docstring: Fetch the total story points for all tasks associated with this project.
    - completion_percentage
      Docstring: Calculate the completion percentage of the project based on story points.
    - __repr__
    - __repr__
  Classes:
    - Project
      Docstring: Represents a project entity.
      - contributors
        Docstring: Define the many-to-many relationship for contributors dynamically.
      - add_contributor
        Docstring: Add a contributor to the project.
      - remove_contributor
        Docstring: Remove a contributor from the project.
      - update_story_points
        Docstring: Recalculate the completed story points for the project.
      - total_story_points
        Docstring: Fetch the total story points for all tasks associated with this project.
      - completion_percentage
        Docstring: Calculate the completion percentage of the project based on story points.
      - __repr__
    - Contributor
      Docstring: Represents a contributor entity.
      - __repr__

File: ./app/models/__init__.py

File: ./app/extensions/db.py

File: ./app/extensions/__init__.py

File: ./app/static/__init__.py

File: ./app/static/custom.js

File: ./app/static/js/ui_utils.js

File: ./app/static/js/tasks.js

File: ./app/static/js/drag_and_drop.js

File: ./app/static/js/tasks_table_interactions.js
  JavaScript Functions:
    - buildTaskParentMap
    - handleTaskOpenClick
    - initializeToggleStates
    - initializeRowLevels
    - initTableSorter
    - initToggleDetails
    - buildTaskParentMap
    - should
    - rebuildTaskParentMap
    - getHierarchyLevel
    - updateTaskParentMap
    - highlightTask
    - toggleChildRows
    - is
    - setupTooltips
    - is
    - setupThemeToggle
    - is
    - refreshTaskRow
    - is
    - setupDeleteTaskLogic
    - is
    - deleteTask
  Comments:
    // Handles lifecycle events for task modals
    // Sets up the parent dropdown (e.g., Select2 initialization)
    // Refreshes the parent dropdown based on task type changes
    // Sets up event listeners for modals
    // Toggles the modal between default and full-page size
    // Resets fields within the modal
    // Initializes "New Task" modal functionality
    // Configures and initializes the task modal
    // Opens a modal for a specific task
    // Fills modal fields with task data
    // Manages contributor assignment actions
    // Log to confirm the script's execution
    /* ======================== Document Initialization ======================== */
    // Step 1: Retrieve CSRF token for secure requests
    // Stop initialization if token is missing
    // Step 2: Initialize modal features
    // Setup modal lifecycle
    // Setup specific modal events
    // Setup lifecycle-related events
    // Prevent redundant re-initialization
    // Step 3: Initialize TaskManager for task-related operations
    // Step 4: Add event listener for "Open Task" links
    // Step 5: Setup "Create Task" button
    // Step 6: Build parent-child relationships map
    // Step 7: Initialize event listeners for toggling child rows
    // Toggle child rows
    // Update toggle icon
    // Step 8: Initialize toggle states for chevrons
    // Step 9: Initialize drag-and-drop functionality
    // Ensure drag-and-drop setup
    /* ======================== Event Handlers ======================== */
    /**
 * Handles clicks on "Open" task links.
 * Prevents click events from propagating to other handlers and opens the modal.
 * @param {Event} event - The click event.
 */
    // Flag to prevent multiple modals
    // Prevent propagation to other click handlers
    // Prevent default link behavior
    // Prevent multiple modals from opening simultaneously
    // Attempt to open the task modal
    // Reset the flag
    /* ======================== Initialization Functions ======================== */
    /**
 * Initializes toggle arrows to match the visibility state of child task rows.
 * Ensures icons reflect the visibility of their associated child rows.
 */
    // Determine the visibility of any child row
    // Update the toggle icon to reflect the visibility state
    /**
 * Adds a data-level attribute to each row based on its hierarchy.
 * The data-level attribute is used for styling nested tasks.
 */
    /**
 * Initializes the TableSorter plugin for the task table.
 * Configures the plugin for sorting task columns with specific settings.
 */
    // Apply Bootstrap theme to the table
    // Add zebra striping for better visibility
    // Disable sorting for the first column
    // Disable sorting for the second column
    // Disable sorting for the actions column
    /**
 * Initializes toggle functionality for parent-child rows.
 * Sets up event listeners for toggle buttons to expand or collapse child rows.
 */
    // Check the current visibility state of the first child row
    // Toggle child row visibility
    // Update the toggle icon to reflect the visibility state
    /* ======================== Utility Functions ======================== */
    /**
 * Builds the `taskParentMap` from the DOM structure.
 * This map is used to maintain parent-child relationships dynamically.
 */
    // Clear existing map to ensure a fresh build
    // Iterate over all task rows to populate the map
    /**
 * Rebuilds the `taskParentMap` to reflect dynamic changes in the DOM.
 * This function should be called after operations like drag-and-drop or task deletion.
 */
    /**
 * Determines the hierarchy level of a task row.
 * Used for styling and enforcing nesting rules dynamically.
 * @param {HTMLElement} row - The task row to analyze.
 * @returns {number} - The hierarchy level (1 for top-level, 2 for nested, etc.).
 */
    // Default level for top-level tasks
    /**
 * Updates the `taskParentMap` dynamically when a task's parent changes.
 * Ensures the map remains consistent with the DOM structure.
 * @param {number} taskId - ID of the task being updated.
 * @param {number|null} parentId - New parent ID, or `null` if no parent.
 */
    /**
 * Highlights a task row temporarily to indicate successful changes.
 * Useful for visual feedback after save or reorder operations.
 * @param {number} taskId - ID of the task to highlight.
 */
    /**
 * Toggles the visibility of child rows when a parent row is toggled.
 * @param {string} parentId - The ID of the parent task.
 * @param {boolean} show - Whether to show or hide the child rows.
 */
    // Recursively toggle nested child rows
    /**
 * Sets up tooltips on elements with the `data-bs-toggle="tooltip"` attribute.
 * Initializes Bootstrap tooltips for elements with tooltip attributes.
 * This function is called after the page loads to ensure consistency.
 */
    /**
 * Configures theme toggle functionality.
 * This function is called after the page loads to ensure consistency.
 * The theme is stored as a data attribute on the HTML element.
 */
    /* ======================== Modal Management ======================== */
    /**
 * Refreshes the specific row from the backend.
 * Updates contributor and other relevant fields dynamically.
 * This function is called after a task is saved or updated.
 * It fetches the latest task data from the backend.
 * It updates the contributor field in the task row.
 * IT DOES NOT CONTAIN ANY LOGIC FOR UPDATING THE PARENT TASK FIELD.
 * IT DOES NOT WORK 
 * @param {number} taskId - The ID of the task to refresh.
 */
    /* ======================== Task Deletion Workflow ======================== */
    /**
 * Configures task deletion with SweetAlert2 confirmation.
 * Displays a modal to choose whether to delete child tasks.
 * MUST REMOVE THE VERY ANNOYING ANIMATION OF SWEETALERT2
 * Sends a DELETE request to the backend to delete the task.
 * This function is called after the page loads to ensure consistency.
 * The task deletion logic sends a DELETE request to the backend, 
 * updates the task list after deletion and displays a success or error message.
 */
    // Reflect the new parent-child relationships
    // Reflect the new parent-child relationships
    /**
 * This function is called when the user confirms the deletion.
 * It sends a DELETE request to the backend to delete the task.
 * The task is deleted along with its children if specified.
 * The `taskId` parameter is the ID of the task to delete.
 * The `deleteChildren` parameter determines whether to delete children.
 * The `csrfToken` parameter is used to send requests securely.
 */
    // Accept csrfToken as a parameter
    // Initialize taskParentMap 
    // Initialize drag-and-drop functionality
    /* document.addEventListener("click", async (event) => {
            if (event.target.classList.contains("task-open-link")) {
                event.preventDefault();
                const taskId = event.target.dataset.taskId;
                try {
                    await openTaskModal(taskId); // Ensure `openTaskModal` is defined and imported
                } catch (error) {
                    console.error("Error opening task modal:", error);
                }
            }
        }); */
    // Reflect the new parent-child relationships
    // Prevent default form submission
    // Reflect the new parent-child relationships
    // 
    /* ======================== Drag and Drop section ======================== */
    // Initialize a global map for task relationships
    // Build the taskParentMap from the DOM
    // Update the map dynamically after drag-and-drop
    // Initialize Sortable.js for drag-and-drop functionality
    // Only draggable via `.task-row` elements
    // Smooth animation
    // Prevent dragging on task links
    // Prevent drag if filtered element is clicked
    // The row that was dragged
    // Rebuild the parent-child relationships after drag-and-drop
    // Ensure rows are sorted by DOM position
    // Determine parent ID using the taskParentMap or row's dataset
    // Update parent ID dynamically based on the DOM structure
    // No parent row above or invalid hierarchy
    // Fallback to taskParentMap for safety
    // Update the taskParentMap dynamically
    // Prepare the task payload for backend submission
    // Send the payload to the backend
    // Ensure CSRF token is included
    // Expose the TaskManager object globally

File: ./app/static/js/filters.js
  Comments:
    // filters.js
    /**
 * Filters Module
 * Handles dynamic filtering and clearing of task filters.
 */
    /**
     * Attach event listeners to filter dropdowns to dynamically update the task list.
     */
    // Update URL and reload with new filter
    /**
     * Attach an event listener to the clear filters button to reset filters.
     */
    // Redirect to the unfiltered task list

File: ./app/static/js/tasks_table_interactions_jan10_1102.js
  JavaScript Functions:
    - is
    - initializeToggleStates
    - is
    - is
    - sends
    - is
    - is
    - updates
    - is
    - logs
    - initDragAndDrop
    - is
    - initTableSorter
    - is
    - initToggleDetails
    - is
    - initializeTaskManager
    - is
    - refreshTaskRow
    - getHierarchyLevel
    - is
    - highlightTask
    - is
    - toggleChildRows
    - is
    - initializeRowLevels
    - is
    - setupTooltips
    - is
    - setupThemeToggle
    - is
    - setupDeleteTaskLogic
    - is
    - deleteTask
    - is
    - is
    - sends
    - updates
    - logs
    - is
    - is
    - is
    - handleDragEnd
    - is
  Comments:
    /* ======================== Initialization ======================== 
* This script is used to initialize the task table interactions.
* It sets up drag-and-drop reordering, row toggling, and other features.
* It also configures the task modal for viewing and editing tasks.
*/
    // Initialize modal functionality
    // Setup modal lifecycle events
    // Handle clicks on task links to open the modal
    // Open the modal with the specified task ID
    /* ======================== Initialization Functions ======================== */
    /**
 * Initializes toggle arrows to match the visibility state of child task rows.
 * Updates the icons to reflect the current visibility of child rows.
 * This function is called after the page loads to ensure consistency.
 * It sets the correct icon based on the visibility of child rows.
 * The icon is toggled between chevron-down and chevron-right.
 * The visibility of child rows is determined by the display style.
 * If any child row is visible, the icon is set to chevron-down.
 * If all child rows are hidden, the icon is set to chevron-right.
 */
    // Skip if no icon or child rows
    // Check visibility of the first child row
    // Update the toggle icon to reflect the state
    /**
 * Initializes drag-and-drop functionality using SortableJS.
 * Configures the drag-and-drop behavior and handles reordering.
 * This function is called after the page loads to ensure consistency.
 * It sets up the drag-and-drop behavior for the task table.
 * The `tableBody` is used as the container for drag-and-drop.
 * The `handle` option specifies the class for the drag handle.
 * The `animation` option controls the animation duration in milliseconds.
 * The `filter` option excludes elements from dragging.
 * The `preventOnFilter` option prevents dragging when using the filter.
 * The `onEnd` callback is called when the drag-and-drop ends.
 * The `handleDragEnd` function is used to handle reordering.
 * The `handleDragEnd` function sends a POST request to update the order.
 * The `handleDragEnd` function is defined in the main script.
 * The `handleDragEnd` function is responsible for reordering tasks.
 * The `handleDragEnd` function updates the task order in the database.
 * The `handleDragEnd` function is called after the drag-and-drop
 * operation is completed and the new order is determined.
 * The `handleDragEnd` function logs the new task order to the console.
 */
    // Call reordering handler
    /**
 * Initializes TableSorter for task table.
 * Configures the plugin for sorting task columns.
 * This function is called after the page loads to ensure consistency.
 * It sets up the TableSorter plugin for the task table.
 * The `theme` option specifies the theme to use for styling.
 * The `widgets` option enables zebra striping for the table.
 * The `headers` option disables sorting for specific columns.
 * The `headers` option is used to exclude action columns from sorting.
 */
    /**
 * Initializes toggle functionality for parent-child rows.
 * Sets up event listeners for the toggle buttons.
 * This function is called after the page loads to ensure consistency.
 * It sets up the toggle buttons for parent-child rows.
 * The `toggle-details` class is used to identify toggle buttons.
 * The `data-task-id` attribute is used to match buttons with rows.
 * The `data-parent-id` attribute is used to identify child rows.
 * The `toggle-details` class is used to identify the toggle buttons.
 */
    // Check current visibility of the first child row
    // Toggle child row visibility
    // Update the toggle icon
    /**
 * Initializes task management functionality.
 * Sets up event listeners and interactions for tasks.
 * This function is called after the page loads to ensure consistency.
 * It initializes the task manager functionality for the page.
 * The `TaskManager` object is used to manage task interactions.
 * The `init` method initializes the task manager functionality.
 * The `initFilters` method initializes the filter elements.
 * The `initTaskInteraction` method initializes task interactions.
 * The `initNewTaskModal` method initializes the new task modal.
 * The `initSaveTask` method initializes the task saving functionality.
 * The `csrfToken` parameter is used to send requests securely.
 * @param {string} csrfToken - CSRF token for requests.
 */
    // Expose the TaskManager object globally
    /* ======================== Functions ======================== */
    /**
 * Refreshes the specific row from the backend.
 * Updates contributor and other relevant fields dynamically.
 * This function is called after a task is saved or updated.
 * It fetches the latest task data from the backend.
 * It updates the contributor field in the task row.
 * @param {number} taskId - The ID of the task to refresh.
 */
    /**
 * Determines the hierarchy level of a task row.
 * The hierarchy level is based on the number of ancestors.
 * The hierarchy level is used to determine the task nesting.
 * @param {HTMLElement} row - The task row.
 * @returns {number} - The hierarchy level (1 for top-level, 2 for nested, etc.).
 */
    /**
 * Highlights a task row after it is saved or updated.
 * Adds a CSS class to the row to highlight it temporarily.
 * The highlight class is removed after a short delay.
 * This function is called after a task is saved or updated.
 * @param {string} taskId - ID of the task to highlight.
 */
    /**
 * Recursively toggles visibility of child rows.
 * Updates icons and ensures consistency across nested tasks.
 * This function is called when a parent row is toggled.
 * It shows or hides the child rows based on the current state.
 * It recursively toggles visibility for nested child rows.
 * The `parentId` parameter is the ID of the parent task.
 * The `show` parameter determines whether to show or hide the rows.
 * The visibility of child rows is toggled based on the `show` parameter.
 * The icon is updated to reflect the current visibility state.
 * @param {string} parentId - The ID of the parent task.
 * @param {boolean} show - Whether to show or hide the child rows.
 */
    /**
 * Adds a data-level attribute to each row based on its hierarchy.
 * The data-level attribute is used for styling nested tasks.
 * This function is called after the page loads to ensure consistency.
 * It sets the data-level attribute for each task row.
 * The data-level attribute is used to style nested tasks.
 * The data-level attribute is based on the hierarchy level.
 * The hierarchy level is determined by the number of ancestors.
 */
    /**
 * Sets up tooltips on elements with the `data-bs-toggle="tooltip"` attribute.
 * Initializes Bootstrap tooltips for elements with tooltip attributes.
 * This function is called after the page loads to ensure consistency.
 */
    /**
 * Configures theme toggle functionality.
 * Toggles between light and dark themes.
 * This function is called after the page loads to ensure consistency.
 * It sets up the theme toggle button to switch between themes.
 * The theme toggle button switches between light and dark themes.
 * The theme is stored as a data attribute on the HTML element.
 * The theme is toggled between "light" and "dark" modes.
 * The theme is applied to the HTML element as a data attribute.
 * The theme attribute is used to style the page based on the theme.
 */
    /* ======================== Task Deletion ======================== */
    /**
 * Configures task deletion with SweetAlert2 confirmation.
 * Displays a modal to choose whether to delete child tasks.
 * Sends a DELETE request to the backend to delete the task.
 * This function is called after the page loads to ensure consistency.
 * It sets up the task deletion logic using SweetAlert2.
 * The task deletion logic prompts the user for confirmation.
 * The user can choose to delete child tasks or keep them.
 * The task deletion logic sends a DELETE request to the backend.
 * The task deletion logic updates the task list after deletion.
 * The task deletion logic displays a success or error message.
 */
    /**
 * Sends a delete request for a task.
 * Deletes the task and optionally its children based on user input.
 * This function is called when the user confirms the deletion.
 * It sends a DELETE request to the backend to delete the task.
 * The task is deleted along with its children if specified.
 * The `taskId` parameter is the ID of the task to delete.
 * The `deleteChildren` parameter determines whether to delete children.
 * The `csrfToken` parameter is used to send requests securely.
 */
    /* ======================== Drag-and-Drop Reordering ======================== */
    /**
 * Handles the drag-and-drop reordering event.
 * Sends a POST request to the backend to update the task order.
 * This function is called after the drag-and-drop operation ends.
 * It sends a POST request to the backend to update the task order.
 * The task order is updated based on the new order of the rows.
 * The `event` parameter contains information about the drag-and-drop.
 * The `event.from` property contains the source container of the drag.
 * The `event.from` property is used to get the list of task rows.
 * The `event.from` property contains the original order of the tasks.
 * The `event.from` property is used to determine the new task order.
 * The `rows` variable contains the list of task rows in the original order.
 * The `order` variable contains the new order of tasks with sort order.
 * The `order` variable is sent to the backend to update the task order.
 * The `order` variable is an array of objects with task ID and sort order.
 * The `handleDragEnd` function is an asynchronous function.
 * The `handleDragEnd` function sends a POST request to the backend.
 * The `handleDragEnd` function updates the task order in the database.
 * The `handleDragEnd` function logs the new task order to the console.
 * The `handleDragEnd` function is called after the drag-and-drop
 * operation is completed and the new order is determined.
 * The `handleDragEnd` function is defined in the main script.
 * The `handleDragEnd` function is responsible for reordering tasks.
 */
    /**
 * Prevents click events on the "Open" link from propagating to other handlers.
 * Stops the event propagation to prevent opening the task modal.
 * This function is called when the "Open" link is clicked.
 * It stops the event propagation to prevent opening the task modal.
 */

File: ./app/static/js/modals.js
  JavaScript Functions:
    - fetchTaskDetails
    - highlightTask
    - initializeParentDropdown
    - refreshParentDropdown
    - setupModalLifecycleEvents
    - setupModalEvents
    - resetModalFields
    - openTaskModal
    - populateTaskModal
    - setupContributorAssignment
    - toggleModalSize
    - initNewTaskModal
    - initializeTaskModal
  Comments:
    /**
 * Modals Module
 * Handles modal lifecycle events, dropdowns, contributor assignments, and field resets.
 */
    /* ======================== Utility Functions ======================== */
    /**
 * Fetches task details from the backend.
 * @param {string} taskId - The ID of the task to fetch.
 * @returns {Promise<object|null>} - The task data or null on failure.
 */
    /**
 * Highlights a task row after it is saved or updated.
 * @param {string} taskId - ID of the task to highlight.
 */
    /* ======================== Dropdown Management ======================== */
    /**
 * Initializes the Select2 dropdown for parent tasks.
 */
    // Set flag to avoid reinitialization
    /**
 * Refreshes the Select2 dropdown when the task type changes.
 */
    /* ======================== Modal Lifecycle Events ======================== */
    /**
 * Configures modal lifecycle events for the "Create/Edit Task" modal.
 */
    // Handle modal shown
    // Initialize the dropdown
    // Handle modal hidden
    // Reset modal fields
    // Remove leftover classes
    // Remove backdrop
    // Restore scrolling
    /**
 * Configures modal lifecycle events for the "Create/Edit Task" modal.
 */
    // Handle modal hidden events to highlight updated tasks
    // Toggle modal size
    /**
 * Resets all fields in the modal.
 */
    /* ======================== Modal Actions ======================== */
    /**
 * Opens the "Create/Edit Task" modal and populates it with task data.
 * @param {number} taskId - The ID of the task to fetch.
 */
    // Track currently opened task ID to prevent redundant calls
    // Prevent duplicate modal opens
    // Set the currently opened task ID
    // Reset after operation completes
    /**
 * Populates the modal fields with the provided task data.
 * @param {object} task - The task data to populate the modal fields.
 */
    // Define the mapping between modal field IDs and task properties
    // Populate each field in the modal
    // Check if the value exists in the dropdown options; if not, add it dynamically
    // Fallback display text
    // Update the Select2 dropdown
    // For other dropdowns
    // For input fields
    // Update the modal title based on the operation (create or edit)
    // Show the modal
    /**
 * Assigns contributors in the "Create/Edit Task" modal.
 */
    /**
 * Toggles the modal size between full-page and default size.
 */
    /**
 * Resets the "Create Task" modal for creating a new task.
 */
    /**
 * Initializes the task modal logic.
 */
    // Properly dispose of the modal
    // Make it globally accessible if needed

File: ./app/routes/__init__.py

File: ./app/routes/api_routes.py
  Endpoints:
    - /calculate_completion_percentage/<int:project_id> (Methods: route)
    - /delete_project/<int:project_id> (Methods: route)
    - /tasks/<int:task_id> (Methods: route)
    - /tasks (Methods: route)
    - /tasks/delete/<int:task_id> (Methods: route)
    - name (Methods: get)
    - title (Methods: get)
    - id (Methods: get)
    - task_id (Methods: get)
    - description (Methods: get)
    - contributor_id (Methods: get)
    - completed (Methods: get)
    - story_points (Methods: get)
    - parent_id (Methods: get)
    - description (Methods: get)
    - contributor_id (Methods: get)
    - completed (Methods: get)
    - sort_order (Methods: get)
    - confirm_children (Methods: get)
  Functions:
    - calculate_completion_percentage_api
      Docstring: API endpoint to calculate the completion percentage of a project.
    - api_delete_project
      Docstring: API endpoint to delete a project and its related tasks.
    - get_task_details
      Docstring: Fetch task details by ID and return as JSON using the TaskService utility method.
    - validate_task_payload
      Docstring: Validates task payload for required fields and hierarchy rules.
    - save_task
      Docstring: API route to create a new task or update an existing one.
Handles validation, parent-child hierarchy rules, and database interactions.

Expected Payload:
- title (string): Task title (mapped to 'name')
- description (string, optional): Task description
- project_id (int): Associated project ID
- task_type (string): Task type (e.g., "Epic", "User Story", "Subtask")
- parent_id (int, optional): ID of the parent task (if applicable)
- story_points (int, optional): Task story points
- contributor_id (int, optional): ID of the assigned contributor
- completed (bool, optional): Completion status
- sort_order (int, optional): Sort order of the task

Returns:
- JSON response with success or error details.
    - delete_task
      Docstring: API endpoint to delete a task. Optionally, delete its child tasks as well.
:param task_id: ID of the task to be deleted.
:return: JSON response with success or error message.

File: ./app/routes/page_routes.py
  Endpoints:
    - / (Methods: route)
    - /base (Methods: route)
    - /test-flash (Methods: route)
    - /dashboard (Methods: route)
    - /project/<project_name> (Methods: route)
    - /create_project (Methods: route)
    - /add_contributor/<project_name> (Methods: route)
    - /remove_contributor/<project_name> (Methods: route)
    - /delete_project/<int:project_id> (Methods: route)
    - contributor_name (Methods: get)
    - contributor_name (Methods: get)
  Functions:
    - index
      Docstring: Renders the homepage with project details and a form to add new projects.
    - base
      Docstring: Renders the base.html template.
    - test_flash
      Docstring: Adds a test flash message and redirects to the base page.
    - dashboard
      Docstring: Renders the dashboard page with project and contributor stats and charts.
    - project
      Docstring: Displays project details and allows interaction such as adding contributors or viewing charts.
    - create_project
      Docstring: Handles the creation of a new project.
    - add_contributor
      Docstring: Adds a contributor to a specified project. Logs all interactions for tracing and debugging.
    - remove_contributor
      Docstring: Removes a contributor from a specified project. Prevents removal if the contributor has assigned tasks.
Logs all interactions for tracing and debugging.

:param project_name: The name of the project from which the contributor will be removed.
    - delete_project
      Docstring: Deletes a project and all its tasks. Handles errors during deletion.

